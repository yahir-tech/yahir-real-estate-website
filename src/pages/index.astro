---
const businessName = "Yahir Galvan Real Estate";
const phoneDisplay = "(956) 739-8260";
const phoneLink = "+19567398260";

// ✅ CHANGE THIS TO YOUR EMAIL:
const YOUR_EMAIL = "Yahir@bigrealty.com";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{businessName} | RGV</title>
    <meta
      name="description"
      content="Lead capture website for Yahir Galvan Real Estate — Serving all of the Rio Grande Valley."
    />

    <style>
      :root{--bg:#0b1220;--card:#0f1a33;--text:#eaf0ff;--muted:#b6c2e2;--accent:#7aa7ff;--line:#233155;}
      *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#070b14);color:var(--text)}
      a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
      .wrap{max-width:1100px;margin:0 auto;padding:24px}
      .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 0}
      .brand{font-weight:800;letter-spacing:.3px}
      .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:12px;background:var(--accent);color:#0a1020;font-weight:700;border:none;cursor:pointer}
      .btn.secondary{background:transparent;color:var(--text);border:1px solid var(--line)}
      .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:22px;align-items:stretch;margin-top:8px}
      .card{background:rgba(15,26,51,.85);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.25)}
      h1{margin:.2rem 0 0;font-size:38px;line-height:1.08}
      .sub{color:var(--muted);margin:12px 0 0;font-size:16px;line-height:1.5}
      .pillrow{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
      .pill{font-size:13px;color:var(--muted);border:1px solid var(--line);padding:8px 10px;border-radius:999px}
      .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px}
      .k{font-weight:800}
      label{display:block;font-size:13px;color:var(--muted);margin:10px 0 6px}
      input,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:#0b1430;color:var(--text);outline:none}
      textarea{min-height:110px;resize:vertical}
      .fine{font-size:12px;color:var(--muted);line-height:1.45}
      .checkline{display:flex;gap:10px;align-items:flex-start;margin-top:10px}
      .checkline input{width:18px;height:18px;margin-top:2px}
      .footer{margin:26px 0 10px;color:var(--muted);font-size:12px;display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
      .section{margin-top:18px}
      .hr{height:1px;background:var(--line);margin:16px 0}
      .success{display:none;margin-top:12px;padding:10px 12px;border-radius:12px;background:rgba(122,167,255,.12);border:1px solid rgba(122,167,255,.35);color:var(--text)}
      @media (max-width: 900px){.hero{grid-template-columns:1fr}.grid3{grid-template-columns:1fr} h1{font-size:32px}}
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="nav">
        <div class="brand">{businessName}</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end">
          <a class="btn secondary" href="#services">Services</a>
          <a class="btn secondary" href="#privacy">Privacy</a>
          <a class="btn" href="#contact">Contact</a>
        </div>
      </div>

      <div class="hero">
        <div class="card">
          <h1>Real Estate Help Across the RGV</h1>
          <p class="sub">
            Buy • Sell • Invest — Serving <strong>all of the Rio Grande Valley</strong>.
            Tell me what you’re looking for and I’ll follow up quickly.
          </p>

          <div class="pillrow">
            <div class="pill">RGV-wide service</div>
            <div class="pill">Fast response</div>
            <div class="pill">Residential & investment</div>
            <div class="pill">Bilingual-friendly</div>
          </div>

          <div id="services" class="grid3 section">
            <div class="card">
              <div class="k">Buying</div>
              <div class="fine">Home search, showings, negotiation, and guidance from offer to closing.</div>
            </div>
            <div class="card">
              <div class="k">Selling</div>
              <div class="fine">Pricing strategy, marketing, professional photos, and strong buyer follow-up.</div>
            </div>
            <div class="card">
              <div class="k">Investing</div>
              <div class="fine">Rental/investment property support, numbers review, and local market insight.</div>
            </div>
          </div>

          <div class="hr"></div>
          <div class="fine">
            Call/Text: <a href={`tel:${phoneLink}`}>{phoneDisplay}</a>
          </div>
        </div>

        <div id="contact" class="card">
          <h2 style="margin:0 0 6px">Contact</h2>
          <p class="fine" style="margin:0 0 10px">
            Send a message and I’ll get back to you. <strong>Phone is optional.</strong>
          </p>

          <!-- ✅ COMPLIANCE: Phone optional + SMS checkbox optional -->
          <form id="leadForm" novalidate>
            <label for="name">Full Name *</label>
            <input id="name" name="name" autocomplete="name" required />

            <label for="email">Email *</label>
            <input id="email" name="email" type="email" autocomplete="email" required />

            <label for="phone">Phone (optional)</label>
            <input id="phone" name="phone" type="tel" autocomplete="tel" placeholder="(###) ###-####" />

            <label for="message">What are you looking for? *</label>
            <textarea id="message" name="message" required placeholder="Example: 3 bed home in Mission under $250k, or an investment property in McAllen..."></textarea>

            <div class="checkline">
              <input id="sms_opt_in" name="sms_opt_in" type="checkbox" />
              <div class="fine">
                <!-- ✅ REQUIRED OPT-IN LANGUAGE -->
                I agree to be contacted by <strong>{businessName}</strong> via call, email, and text for real estate services.
                To opt out, you can reply <strong>'stop'</strong> at any time or reply <strong>'help'</strong> for assistance.
                You can also click the unsubscribe link in the emails.
                Message and data rates may apply. Message frequency may vary.
                <a href="#privacy">Privacy Policy</a>.
                <br /><br />
                <strong>Note:</strong> This checkbox is optional. You can submit this form without agreeing to SMS/text.
              </div>
            </div>

            <button class="btn" type="submit" style="width:100%;margin-top:14px">Send</button>

            <div id="success" class="success">
              Thanks! Your message is ready to send. If it didn’t open automatically, you can copy it below.
              <div id="copyBox" class="fine" style="margin-top:10px;white-space:pre-wrap"></div>
            </div>

            <div class="fine" style="margin-top:12px">
              By submitting this form, you acknowledge our <a href="#terms">Terms</a> and <a href="#privacy">Privacy Policy</a>.
            </div>
          </form>
        </div>
      </div>

      <div class="card section" id="privacy">
        <h2 style="margin:0 0 6px">Privacy Policy (Simple)</h2>
        <p class="fine" style="margin:0">
          We collect the information you submit (name, email, optional phone, and message) to respond to your real estate inquiry and provide requested services.
          If you provide a phone number, you will only receive text messages if you also check the SMS consent box above.
          We do not sell your personal information. We may share your information with service providers used to respond to your inquiry (e.g., CRM systems).
          You can opt out of text messages by replying “STOP” and request help by replying “HELP”. Email messages may include an unsubscribe link.
        </p>
      </div>

      <div class="card section" id="terms">
        <h2 style="margin:0 0 6px">Terms</h2>
        <p class="fine" style="margin:0">
          This website provides general information and does not create an agency relationship until confirmed in writing.
          Property information is subject to change. By contacting us, you confirm the details you submit are accurate.
        </p>
      </div>

      <div class="footer">
        <div>© <span id="yr"></span> {businessName} • RGV</div>
        <div style="display:flex;gap:14px;flex-wrap:wrap">
          <a href="#privacy">Privacy</a>
          <a href="#terms">Terms</a>
          <a href={`tel:${phoneLink}`}>{phoneDisplay}</a>
        </div>
      </div>
    </div>

    <script is:inline>
      document.getElementById("yr").textContent = new Date().getFullYear();

      const form = document.getElementById("leadForm");
      const success = document.getElementById("success");
      const copyBox = document.getElementById("copyBox");

      function validateEmail(email){
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const message = document.getElementById("message").value.trim();
        const smsOptIn = document.getElementById("sms_opt_in").checked;

        if(!name || !email || !message || !validateEmail(email)){
          alert("Please fill out Name, a valid Email, and your Message.");
          return;
        }

        // ✅ COMPLIANCE GUARDRAIL:
        // If they check SMS consent but didn’t provide a phone number, don’t submit.
        if(smsOptIn && !phone){
          alert("To receive texts, please add a phone number OR uncheck the SMS consent box.");
          return;
        }

        const consentLine = smsOptIn
          ? "Consent: YES (Call/Email/Text)"
          : "Consent: NO (Email ok; no SMS/text consent)";

        const payload =
`New website lead:

Name: ${name}
Email: ${email}
Phone: ${phone || "(not provided)"}
${consentLine}

Message:
${message}

Opt-out info: Reply STOP to opt out, HELP for help. Msg/data rates may apply. Msg frequency may vary.`;

        success.style.display = "block";
        copyBox.textContent = payload;

        const subject = encodeURIComponent("New RGV Real Estate Lead");
        const body = encodeURIComponent(payload);

        window.location.href = `mailto:${YOUR_EMAIL}?subject=${subject}&body=${body}`;
      });
    </script>
  </body>
</html>
